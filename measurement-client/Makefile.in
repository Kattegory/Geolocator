# @configure_input@

CC          = @CC@
CFLAGS      = @CFLAGS@
WARN_CFLAGS = @WARN_CFLAGS@
CPPFLAGS    = @CPPFLAGS@
LDFLAGS     = @LDFLAGS@
LIBS        = @LIBS@
O           = .@OBJEXT@
X           = @EXEEXT@

LDCMD       = $(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS)
CCCMD       = $(CC) $(CPPFLAGS) $(CFLAGS) $(WARN_CFLAGS) -c

all: probe-core$X probe-core-socks$X

probe-core$X: probe-core$O
	$(LDCMD) -o probe-core$X probe-core$O $(LIBS)

probe-core-socks$X: probe-core-socks$O
	$(LDCMD) -o probe-core-socks$X probe-core-socks$O $(LIBS)

probe-core$O: probe-core.c config.h
	$(CCCMD) -o probe-core$O probe-core.c

probe-core-socks$O: probe-core-socks.c config.h
	$(CCCMD) -o probe-core-socks$O probe-core-socks.c

clean:
	-rm -f probe-core$O probe-core$X probe-core-socks$O probe-core-socks$X
distclean: clean
	-rm -f config.h config.status Makefile

## configuration rebuild rules
Makefile: Makefile.in config.status
	./config.status Makefile

config.h: config.h.in config.status
	./config.status config.h && touch config.h

config.status: configure
	./config.status --recheck

## uncomment these if you are hacking on the configure script
#configure: configure.ac
#	autoconf
#
#config.h.in: configure.ac
#	autoheader --force

.PHONY: all clean distclean
